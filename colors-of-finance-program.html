<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colors of Finance - Spr√°vce programu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: bold;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .info-message {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .program-container {
            margin-top: 30px;
        }

        .program-item {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .program-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .program-item.interested {
            background: #d4edda;
            border-color: #28a745;
        }

        .program-item.maybe {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .program-item.not-interested {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .program-item.default {
            background: #f8f9fa;
            border-color: #ddd;
        }

        .program-time {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .program-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .program-speaker {
            color: #666;
            font-style: italic;
            margin-bottom: 5px;
        }

        .program-description {
            color: #555;
            margin-top: 8px;
            font-size: 14px;
            line-height: 1.5;
        }

        .program-tags {
            margin-top: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .tag {
            background: #e9ecef;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #495057;
        }

        .color-legend {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid;
        }

        .legend-color.green {
            background: #d4edda;
            border-color: #28a745;
        }

        .legend-color.orange {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .legend-color.red {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .legend-color.gray {
            background: #f8f9fa;
            border-color: #ddd;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .filter-btn:hover {
            background: #f8f9fa;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 5px;
            text-align: center;
            min-width: 100px;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .hidden {
            display: none;
        }

        .status-hint {
            margin-top: 10px;
            font-size: 12px;
            color: #999;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .status-hint strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Colors of Finance - Spr√°vce programu</h1>
        <p class="subtitle">Zp≈ôehlednƒõte si program a oznaƒçte si, co v√°s zaj√≠m√°</p>

        <div id="inputSection">
            <div class="info-message">
                ‚ÑπÔ∏è <strong>Jak na to:</strong> Vlo≈æte program konference. M≈Ø≈æete zkop√≠rovat text z webu nebo vlo≈æit strukturovan√° data.
                <br><strong>Form√°t:</strong> Ka≈æd√Ω ≈ô√°dek = jedna polo≈æka programu. Form√°t: <code>ƒåAS | N√ÅZEV | ≈òEƒåN√çK | POPIS</code>
                <br>Minim√°lnƒõ pot≈ôebujete: <code>ƒåAS | N√ÅZEV</code>
            </div>

            <div class="form-group">
                <label for="programInput">Program konference:</label>
                <textarea id="programInput" placeholder="P≈ô√≠klad:
09:00 | √övodn√≠ semin√°≈ô | Jan Nov√°k | √övod do konference
10:00 | AI ve financ√≠ch | Petr Svoboda | Jak umƒõl√° inteligence mƒõn√≠ finanƒçn√≠ svƒõt
11:00 | LinkedIn pro finanƒçn√≠ poradce | Marie Dvo≈ô√°kov√° | Jak efektivnƒõ vyu≈æ√≠vat LinkedIn
12:00 | IT bezpeƒçnost | Tom√°≈° Proch√°zka | Kybernetick√° bezpeƒçnost v bankovnictv√≠"></textarea>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="loadProgram()">Naƒç√≠st program</button>
                <button class="btn btn-secondary" onclick="loadSampleProgram()">Naƒç√≠st uk√°zkov√Ω program</button>
                <button class="btn btn-info" onclick="autoMarkProgram()">Automaticky oznaƒçit podle preferenc√≠</button>
            </div>
        </div>

        <div id="programSection" class="hidden">
            <div class="color-legend">
                <div class="legend-item">
                    <div class="legend-color green"></div>
                    <span><strong>Zaj√≠m√° mƒõ</strong> (zelen√°) - Kliknƒõte na polo≈æku pro zmƒõnu</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color orange"></div>
                    <span><strong>Mo≈æn√°</strong> (oran≈æov√°) - Kliknƒõte na polo≈æku pro zmƒõnu</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color red"></div>
                    <span><strong>Nezaj√≠m√° mƒõ</strong> (ƒçerven√°) - Kliknƒõte na polo≈æku pro zmƒõnu</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color gray"></div>
                    <span><strong>Neoznaƒçeno</strong> (≈°ed√°) - Kliknƒõte na polo≈æku pro zmƒõnu</span>
                </div>
            </div>

            <div class="stats" id="stats"></div>

            <div class="filters">
                <button class="filter-btn active" onclick="filterProgram('all')">V≈°e</button>
                <button class="filter-btn" onclick="filterProgram('interested')">Zaj√≠m√° mƒõ</button>
                <button class="filter-btn" onclick="filterProgram('maybe')">Mo≈æn√°</button>
                <button class="filter-btn" onclick="filterProgram('not-interested')">Nezaj√≠m√°</button>
                <button class="filter-btn" onclick="filterProgram('unmarked')">Neoznaƒçeno</button>
            </div>

            <div class="controls">
                <button class="btn btn-success" onclick="exportProgram()">üì• Exportovat program</button>
                <button class="btn btn-secondary" onclick="resetView()">‚Üê Zpƒõt na vstup</button>
                <button class="btn btn-info" onclick="autoMarkProgram()">üîÑ Znovu automaticky oznaƒçit</button>
            </div>

            <div id="programContainer" class="program-container"></div>
        </div>
    </div>

    <script>
        let programData = [];
        let currentFilter = 'all';

        // Kl√≠ƒçov√° slova pro automatick√© oznaƒçov√°n√≠
        const preferences = {
            interested: ['IT', 'AI', 'umƒõl√° inteligence', 'artificial intelligence', 'LinkedIn', '√∫vodn√≠ semin√°≈ô', '√∫vod', 'digit√°ln√≠', 'digital', 'technologie', 'tech', 'automatizace', 'software', 'aplikace', 'platforma', 'inovace', 'startup', 'fintech', 'kybernetick√°', 'cyber', 'bezpeƒçnost', 'security', 'cloud', 'data', 'analytics', 'big data'],
            maybe: ['investice', 'investov√°n√≠', 'portfolio', 'akcie', 'kryptomƒõny', 'crypto', 'blockchain', 'marketing', 'obchod', 'byznys', 'strategie', 'pl√°nov√°n√≠', 'anal√Ωza', 's√≠≈•', 'networking', 'vztahy', 'klient', 'poradenstv√≠', 'pen√≠ze', 'finance', 'bankovnictv√≠', 'banking']
        };

        function parseProgram(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const program = [];

            lines.forEach((line, index) => {
                const parts = line.split('|').map(p => p.trim());
                
                if (parts.length >= 2) {
                    program.push({
                        id: index,
                        time: parts[0] || 'Nezn√°m√Ω ƒças',
                        title: parts[1] || 'Bez n√°zvu',
                        speaker: parts[2] || '',
                        description: parts[3] || '',
                        status: 'default', // default, interested, maybe, not-interested
                        tags: extractTags(parts[1] + ' ' + (parts[2] || '') + ' ' + (parts[3] || ''))
                    });
                } else if (line.trim()) {
                    // Pokud nen√≠ form√°t s |, zkus√≠me jin√Ω form√°t
                    program.push({
                        id: index,
                        time: '',
                        title: line.trim(),
                        speaker: '',
                        description: '',
                        status: 'default',
                        tags: extractTags(line)
                    });
                }
            });

            return program;
        }

        function extractTags(text) {
            const tags = [];
            const lowerText = text.toLowerCase();
            
            const tagKeywords = {
                'IT': ['it', 'technologie', 'tech', 'software', 'aplikace', 'syst√©m'],
                'AI': ['ai', 'umƒõl√° inteligence', 'artificial intelligence', 'machine learning', 'ml', 'neural'],
                'LinkedIn': ['linkedin', 'soci√°ln√≠ s√≠tƒõ', 'social media', 'soci√°ln√≠ m√©dia'],
                'Investice': ['investice', 'investov√°n√≠', 'portfolio', 'akcie', 'akciov√Ω trh'],
                'Kryptomƒõny': ['krypto', 'crypto', 'bitcoin', 'blockchain', 'ethereum'],
                'Marketing': ['marketing', 'reklama', 'branding', 'propagace'],
                'Finance': ['finance', 'pen√≠ze', 'bankovnictv√≠', 'banking', 'finanƒçn√≠'],
                'Bezpeƒçnost': ['bezpeƒçnost', 'security', 'kybernetick√°', 'cyber', 'ochrana'],
                'Cloud': ['cloud', 'cloud computing', 'cloudov√© ≈ôe≈°en√≠'],
                'Data': ['data', 'analytics', 'big data', 'anal√Ωza dat']
            };

            for (const [tag, keywords] of Object.entries(tagKeywords)) {
                if (keywords.some(keyword => lowerText.includes(keyword))) {
                    tags.push(tag);
                }
            }

            return tags;
        }

        function loadProgram() {
            const input = document.getElementById('programInput').value.trim();
            
            if (!input) {
                alert('Pros√≠m vlo≈æte program');
                return;
            }

            programData = parseProgram(input);
            
            if (programData.length === 0) {
                alert('Nepoda≈ôilo se naƒç√≠st ≈æ√°dn√© polo≈æky programu. Zkontrolujte form√°t.');
                return;
            }
            
            // Naƒç√≠st ulo≈æen√© stavy
            loadSavedStates();
            
            displayProgram();
            document.getElementById('inputSection').classList.add('hidden');
            document.getElementById('programSection').classList.remove('hidden');
            
            // Ulo≈æit do localStorage
            saveProgram();
        }

        function loadSampleProgram() {
            const sample = `09:00 | √övodn√≠ semin√°≈ô | Organiz√°to≈ôi | V√≠tejte na Colors of Finance 2025
09:30 | AI ve financ√≠ch - budoucnost je tady | Jan Nov√°k | Jak umƒõl√° inteligence mƒõn√≠ finanƒçn√≠ poradenstv√≠
10:00 | LinkedIn pro finanƒçn√≠ profesion√°ly | Marie Dvo≈ô√°kov√° | Efektivn√≠ vyu≈æit√≠ LinkedIn pro budov√°n√≠ klientely
10:30 | IT bezpeƒçnost v bankovnictv√≠ | Tom√°≈° Proch√°zka | Kybernetick√° bezpeƒçnost a ochrana dat
11:00 | Investiƒçn√≠ strategie pro rok 2025 | Petr Svoboda | Aktu√°ln√≠ trendy na trz√≠ch
11:30 | Kryptomƒõny a blockchain technologie | Jakub Novotn√Ω | Budoucnost digit√°ln√≠ch aktiv
12:00 | Marketing pro finanƒçn√≠ poradce | Lucie Svobodov√° | Jak oslovit nov√© klienty
12:30 | Automatizace ve finanƒçn√≠m poradenstv√≠ | Martin Dvo≈ô√°k | Software a n√°stroje pro efektivitu
13:00 | Obƒõd | - | -
13:30 | Digit√°ln√≠ transformace bankovnictv√≠ | Anna Nov√°kov√° | Jak banky reaguj√≠ na zmƒõny
14:00 | Fintech inovace | Pavel Hor√°k | Nov√© technologie ve finanƒçn√≠ch slu≈æb√°ch
14:30 | Cloud computing pro finance | Michal Kratochv√≠l | Bezpeƒçn√© cloudov√© ≈ôe≈°en√≠
15:00 | Data analytics ve financ√≠ch | Veronika Proch√°zkov√° | Jak vyu≈æ√≠t data pro lep≈°√≠ rozhodov√°n√≠
15:30 | Networking a budov√°n√≠ vztah≈Ø | Zuzana Nov√° | Efektivn√≠ networking na konferenc√≠ch
16:00 | Startup ekosyst√©m v ƒåR | Ond≈ôej Mal√Ω | Jak zaƒç√≠t s vlastn√≠m fintech projektem
16:30 | Z√°vƒõreƒçn√© shrnut√≠ | Organiz√°to≈ôi | Shrnut√≠ hlavn√≠ch t√©mat konference`;

            document.getElementById('programInput').value = sample;
            loadProgram();
        }

        function autoMarkProgram() {
            if (programData.length === 0) {
                alert('Nejprve naƒçtƒõte program');
                return;
            }

            let markedCount = 0;

            programData.forEach(item => {
                const text = (item.title + ' ' + item.speaker + ' ' + item.description).toLowerCase();
                
                // Pokud u≈æ m√° status, nech√°me ho (nebo m≈Ø≈æeme p≈ôepsat - podle pot≈ôeby)
                // Pro automatick√© oznaƒçov√°n√≠ p≈ôep√≠≈°eme jen neoznaƒçen√©
                if (item.status !== 'default') return;

                // Zkontrolovat preference
                const hasInterested = preferences.interested.some(keyword => text.includes(keyword.toLowerCase()));
                const hasMaybe = preferences.maybe.some(keyword => text.includes(keyword.toLowerCase()));

                if (hasInterested) {
                    item.status = 'interested';
                    markedCount++;
                } else if (hasMaybe) {
                    item.status = 'maybe';
                    markedCount++;
                }
            });

            displayProgram();
            saveProgram();
            
            if (markedCount > 0) {
                alert(`Automaticky oznaƒçeno ${markedCount} polo≈æek podle va≈°ich preferenc√≠ (IT, AI, LinkedIn, √övodn√≠ semin√°≈ô).`);
            } else {
                alert('≈Ω√°dn√© nov√© polo≈æky nebyly automaticky oznaƒçeny. Mo≈æn√° u≈æ jsou v≈°echny oznaƒçen√© nebo neodpov√≠daj√≠ preferenc√≠m.');
            }
        }

        function displayProgram() {
            const container = document.getElementById('programContainer');
            container.innerHTML = '';

            const filtered = getFilteredProgram();

            if (filtered.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">≈Ω√°dn√© polo≈æky k zobrazen√≠. Zkuste zmƒõnit filtr.</div>';
                return;
            }

            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = `program-item ${item.status}`;
                div.onclick = () => toggleStatus(item.id);

                let tagsHtml = '';
                if (item.tags.length > 0) {
                    tagsHtml = '<div class="program-tags">' + 
                        item.tags.map(tag => `<span class="tag">${tag}</span>`).join('') + 
                        '</div>';
                }

                const statusText = {
                    'interested': 'Zaj√≠m√° mƒõ',
                    'maybe': 'Mo≈æn√°',
                    'not-interested': 'Nezaj√≠m√° mƒõ',
                    'default': 'Neoznaƒçeno'
                };

                div.innerHTML = `
                    <div class="program-time">${item.time || 'ƒåas neuveden'}</div>
                    <div class="program-title">${item.title}</div>
                    ${item.speaker ? `<div class="program-speaker">üë§ ${item.speaker}</div>` : ''}
                    ${item.description ? `<div class="program-description">${item.description}</div>` : ''}
                    ${tagsHtml}
                    <div class="status-hint">
                        <strong>Aktu√°ln√≠ status:</strong> ${statusText[item.status]} | <strong>Kliknƒõte pro zmƒõnu</strong>
                    </div>
                `;

                container.appendChild(div);
            });

            updateStats();
        }

        function toggleStatus(id) {
            const item = programData.find(p => p.id === id);
            if (!item) return;

            const statuses = ['default', 'interested', 'maybe', 'not-interested'];
            const currentIndex = statuses.indexOf(item.status);
            item.status = statuses[(currentIndex + 1) % statuses.length];

            displayProgram();
            saveProgram();
        }

        function filterProgram(filter) {
            currentFilter = filter;
            
            // Aktualizovat tlaƒç√≠tka
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            displayProgram();
        }

        function getFilteredProgram() {
            if (currentFilter === 'all') {
                return programData;
            }

            const statusMap = {
                'interested': 'interested',
                'maybe': 'maybe',
                'not-interested': 'not-interested',
                'unmarked': 'default'
            };

            return programData.filter(item => item.status === statusMap[currentFilter]);
        }

        function updateStats() {
            const stats = {
                total: programData.length,
                interested: programData.filter(p => p.status === 'interested').length,
                maybe: programData.filter(p => p.status === 'maybe').length,
                notInterested: programData.filter(p => p.status === 'not-interested').length,
                unmarked: programData.filter(p => p.status === 'default').length
            };

            document.getElementById('stats').innerHTML = `
                <div class="stat-item">
                    <div class="stat-number">${stats.total}</div>
                    <div class="stat-label">Celkem</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" style="color: #28a745;">${stats.interested}</div>
                    <div class="stat-label">Zaj√≠m√°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" style="color: #ffc107;">${stats.maybe}</div>
                    <div class="stat-label">Mo≈æn√°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" style="color: #dc3545;">${stats.notInterested}</div>
                    <div class="stat-label">Nezaj√≠m√°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" style="color: #6c757d;">${stats.unmarked}</div>
                    <div class="stat-label">Neoznaƒçeno</div>
                </div>
            `;
        }

        function exportProgram() {
            const interested = programData.filter(p => p.status === 'interested').sort((a, b) => a.time.localeCompare(b.time));
            const maybe = programData.filter(p => p.status === 'maybe').sort((a, b) => a.time.localeCompare(b.time));

            let exportText = '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            exportText += '   COLORS OF FINANCE 2025 - M≈ÆJ VYBRAN√ù PROGRAM\n';
            exportText += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';

            if (interested.length > 0) {
                exportText += 'üü¢ ZAJ√çM√Å Mƒö (Zelen√° - Priorita)\n';
                exportText += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n';
                interested.forEach(item => {
                    exportText += `${item.time} - ${item.title}`;
                    if (item.speaker) exportText += `\n   üë§ ${item.speaker}`;
                    if (item.description) exportText += `\n   ${item.description}`;
                    exportText += '\n\n';
                });
            }

            if (maybe.length > 0) {
                exportText += '\nüü† MO≈ΩN√Å (Oran≈æov√° - Sekund√°rn√≠ z√°jem)\n';
                exportText += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n';
                maybe.forEach(item => {
                    exportText += `${item.time} - ${item.title}`;
                    if (item.speaker) exportText += `\n   üë§ ${item.speaker}`;
                    if (item.description) exportText += `\n   ${item.description}`;
                    exportText += '\n\n';
                });
            }

            if (interested.length === 0 && maybe.length === 0) {
                exportText += '‚ö†Ô∏è Zat√≠m nem√°te oznaƒçen√© ≈æ√°dn√© polo≈æky.\n';
            }

            exportText += '\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            exportText += `Celkem: ${interested.length} prioritn√≠ch, ${maybe.length} sekund√°rn√≠ch\n`;
            exportText += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';

            // Vytvo≈ôit a st√°hnout soubor
            const blob = new Blob([exportText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'colors-of-finance-muj-program.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function resetView() {
            document.getElementById('inputSection').classList.remove('hidden');
            document.getElementById('programSection').classList.add('hidden');
        }

        function saveProgram() {
            localStorage.setItem('cof_program', JSON.stringify(programData));
        }

        function loadSavedStates() {
            const saved = localStorage.getItem('cof_program');
            if (saved) {
                try {
                    const savedData = JSON.parse(saved);
                    // Slouƒçit ulo≈æen√© stavy s nov√Ωmi daty podle ID
                    programData.forEach(item => {
                        const savedItem = savedData.find(s => s.id === item.id && s.title === item.title);
                        if (savedItem) {
                            item.status = savedItem.status;
                        }
                    });
                } catch (e) {
                    console.error('Chyba p≈ôi naƒç√≠t√°n√≠ ulo≈æen√Ωch dat:', e);
                }
            }
        }

        // Naƒç√≠st ulo≈æen√Ω program p≈ôi naƒçten√≠ str√°nky
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('cof_program');
            if (saved) {
                try {
                    const savedData = JSON.parse(saved);
                    if (savedData.length > 0) {
                        // Rekonstruovat text z dat
                        let text = '';
                        savedData.forEach(item => {
                            text += `${item.time} | ${item.title}`;
                            if (item.speaker) text += ` | ${item.speaker}`;
                            if (item.description) text += ` | ${item.description}`;
                            text += '\n';
                        });
                        document.getElementById('programInput').value = text.trim();
                    }
                } catch (e) {
                    console.error('Chyba p≈ôi naƒç√≠t√°n√≠:', e);
                }
            }
        });
    </script>
</body>
</html>
